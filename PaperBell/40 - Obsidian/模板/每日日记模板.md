---
date: <% tp.date.now('YYYY-MM-DD') %>
tags: DailyNote
week: <% tp.date.now("YYYY-WW") %>
---
<%*
// 智能处理日期，但不强制重命名文件
let fileName = tp.file.title;
let targetDate;

// 检查文件名是否已经是正确的日期格式
if (fileName.match(/^\d{4}年\d{2}月\d{2}日$/)) {
    // 如果文件名已经是日期格式，使用文件名作为基准日期
    targetDate = fileName;
} else {
    // 如果不是日期格式，使用今天的日期作为基准，但不重命名文件
    // 这样可以保持与task-progress-bar插件的兼容性
    targetDate = tp.date.now("YYYY年MM月DD日");
}

// 计算前一天和后一天
let prevDay = tp.date.now("YYYY年MM月DD日", -1, targetDate, "YYYY年MM月DD日");
let nextDay = tp.date.now("YYYY年MM月DD日", 1, targetDate, "YYYY年MM月DD日");
let weekRecord = tp.date.now("YYYY年第WW周记录", 0, targetDate, "YYYY年MM月DD日");
-%>
<< [[<% prevDay %>]] | [[<% nextDay %>]] >>
本周记录：[[<% weekRecord %>]]

-----

## 概览

## 日程
